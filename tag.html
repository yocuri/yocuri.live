<div id="cards"></div>

<script>
async function loadNotion() {
  const res = await fetch("/notion");
  const { results } = await res.json();

  // ðŸ§­ Filter items that include a specific tag
  const desiredTag = "Predictions";
  const filtered = results.filter(item =>
    item.properties.Tags?.multi_select?.some(tag => tag.name === desiredTag)
  );

  const container = document.getElementById("cards");
  container.innerHTML = ""; // clear existing content

  filtered.forEach(item => {
    const props = item.properties;
    const name = props.Name?.title?.map(t => t.plain_text).join('') || "(no title)";
    const tags = props.Tags?.multi_select?.map(t => t.name).join(", ") || "";
    const subtext = props["Sub-text"]?.rich_text?.map(t => t.plain_text).join('') || "";

    const card = document.createElement("div");
    card.className = "card";
    card.innerHTML = `
      <h3>${name}</h3>
      <p>${subtext}</p>
      <small>Tags: ${tags}</small>
    `;
    container.appendChild(card);
  });
}


loadNotion();
</script>

<style>
#cards {
  display: grid;
  gap: 1.2rem;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  padding: 1rem;
}

.card {
  background: white;
  border-radius: 12px;
  padding: 1rem;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: transform 0.1s ease;
}
.card:hover {
  transform: translateY(-2px);
}
.card a {
  color: #0077ff;
  text-decoration: none;
}
.card small {
  color: #555;
  font-style: italic;
}

</style>